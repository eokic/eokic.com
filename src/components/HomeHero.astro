---
// TYPES
import type { IClient, IGlobal, IHome } from '@/interfaces'
interface Props {
  globals: IGlobal
  home: IHome
}

// METHODS
import fetchApi from '@/lib/strapi'
import { aspectRatio } from '@/utils'

// VENDOR
import { micromark } from 'micromark'

// COMPONENTS
// import { Img } from 'astro-imagetools/components'
import { Debug } from 'astro/components'

// PROPS
const { globals, home } = Astro.props

const clients = await fetchApi<IClient[]>({
  endpoint: 'clients',
  query: { populate: 'deep' },
  wrappedByKey: 'data',
})

// ============================================================================
---

<div>
  <div class="container mx-auto">
    <div class="hero">
      <!-- LEFT COLUMN -->
      <div class="hero-left">
        <a class="eokic-logo" href="/">
          <img
            src={globals?.logo?.colorOnLight?.url}
            class="inline-block h-[50px]"
            style=`aspect-ratio: ${aspectRatio(globals?.logo?.colorOnLight?.width, globals?.logo?.colorOnLight?.height, false)}`
            alt="Elmas OkiÄ‡ logo"
          />
        </a>
        <br />
        <div class="relative inline-block mb-10">
          <h1 class="inline-block h1 lh1 +vtrim font-display font-bold">
            {home?.title}
          </h1>
          <small class="body-1 font-display absolute top-[90%] right-[1.25em]">
            {home?.subtitle}
          </small>
          <img
            src={home?.badge.url}
            class="aspect-1/1 w-20 absolute -top-6 left-[19em] ml-4"
            alt="Nielsen/Norman UX Certification badge"
          />
        </div>
        <div
          class="hero-desc prose lead lh1.75"
          set:html={micromark(home?.description)}
        />
      </div>

      <!-- RIGHT COLUMN -->
      <div class="hero-right">
        <div class="photo">
          <div
            class=`mask aspect-${aspectRatio(home?.heroMedia?.width, home?.heroMedia?.height)}`
          >
            <img src={home?.heroMedia?.url} />
            <!-- <Img src={home?.heroMedia?.url} alt="A random image" /> -->
          </div>
          <span class="photo-label photo-label-me">
            {home?.photoLabelMe}
          </span>
          <span class="photo-label photo-label-waifu">
            {home?.photoLabelWaifu}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<br /><br /><br />
<Debug {home} />

<style lang="scss" is:global>
  // ==========================================================================

  .hero {
    @apply grid grid-cols-5 gap-4;

    &-left {
      @apply col-span-12 md:col-span-3;

      .eokic-logo {
        @apply inline-block mb-10;
      }
    }

    &-right {
      @apply col-span-12 md:col-span-2;

      .photo {
        @apply relative;

        .mask {
          @apply overflow-hidden;
          @apply border-8 border-solid border-black;
          @apply bg-gray-800;
          @apply rotate-2;

          img {
            @apply w-full h-full object-cover;
          }
        }

        &-label {
          @apply absolute;
          @apply font-display;

          &-me {
            @apply top-2 right-[100%];
          }

          &-waifu {
            @apply top-3 left-[100%];
            @apply text-right;
          }
        }
      }
    }
  }
</style>
