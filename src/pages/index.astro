---
// ----------------------------------------------------------------------------

// TYPES
import type { IGlobal, IHome, ITestimonial } from '@/interfaces'

// METHODS
import fetchApi from '@/lib/strapi'

// COMPONENTS
// import { Debug } from 'astro/components'
import { BaseLayout } from '@/layouts'
import { HomeHero } from '@/components'

const globals = await fetchApi<IGlobal>({
  endpoint: 'global',
  query: { populate: 'deep' },
  wrappedByKey: 'data',
})

const home = await fetchApi<IHome>({
  endpoint: 'home',
  query: { populate: 'deep' },
  wrappedByKey: 'data',
})

const testimonials = await fetchApi<ITestimonial[]>({
  endpoint: 'testimonials',
  query: { populate: 'deep' },
  wrappedByKey: 'data',
})

// ----------------------------------------------------------------------------
---

<BaseLayout title="Welcome to Astro.">
  <main>
    <br />
    <a href="/case-studies/unhcr-resettlement-data/">UNHCR link</a>

    <HomeHero {globals} {home} />

    {
      testimonials?.map((testimonial) => (
        <blockquote>
          <p>{testimonial.quote}</p>
          <footer>
            <a href="#">{testimonial.person}</a>
            <br />
            <small>{testimonial.position}</small>
          </footer>
        </blockquote>
      ))
    }

    <!-- <Card
      href="https://docs.astro.build/"
      title="Documentation"
      body="Learn how Astro works and explore the official API docs."
    /> -->
  </main>
</BaseLayout>

<style>
  /*  */
</style>
